<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>田んぼ耕運ルートプランナー</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button class="menu-toggle" id="menuToggle">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <div class="sidebar" id="sidebar">
        <h1>🚜 田んぼ耕運ルートプランナー</h1>
        
        <div class="section">
            <div class="section-title">0. 航空写真をアップロード</div>
            <input type="file" id="imageUpload" accept="image/*">
            <label for="imageUpload" class="file-upload-label">
                📷 写真を選択
            </label>
            <div id="imagePreview" class="image-preview" style="display: none;">
                <img id="previewImg" src="" alt="プレビュー">
            </div>
            <div class="image-controls" id="imageControls" style="display: none;">
                <button id="fitImageBtn" class="btn-secondary">画像を合わせる</button>
                <button id="removeImageBtn" class="btn-danger">削除</button>
            </div>
            <div class="help-text">
                Google MapやドローンなどでキャプチャしたJPG/PNG画像
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">1. 田んぼの範囲設定</div>
            <div class="button-group">
                <button id="drawBtn" class="btn-primary">範囲を描画</button>
                <button id="editBtn" class="btn-secondary" disabled>点を編集</button>
                <button id="clearBtn" class="btn-danger" disabled>クリア</button>
            </div>
            <div class="help-text">
                クリックで点を追加、最初の点をクリックで完成
            </div>
        </div>

        <div class="section">
            <div class="section-title">2. 入口・出口の設定</div>
            <div class="button-group">
                <button id="setEntryBtn" class="btn-primary" disabled>入口を設定</button>
                <button id="setExitBtn" class="btn-primary" disabled>出口を設定</button>
            </div>
            <div class="info-box" id="pointInfo">
                入口: 未設定<br>
                出口: 未設定
            </div>
        </div>

        <div class="section">
            <div class="section-title">3. トラクター設定</div>
            <div class="input-group">
                <label>機種名</label>
                <input type="text" id="tractorModel" value="ヤンマー AF222">
            </div>
            <div class="input-group">
                <label>作業幅 (cm)</label>
                <input type="number" id="workWidth" value="110" min="50" max="300">
            </div>
            <div class="input-group">
                <label>重複幅 (cm)</label>
                <input type="number" id="overlapWidth" value="10" min="0" max="50">
            </div>
            <div class="input-group">
                <label>外周の周回数</label>
                <input type="number" id="perimeterRounds" value="3" min="1" max="10">
            </div>
            <div class="help-text">
                AF222標準: 作業幅110cm、重複10cm推奨
            </div>
        </div>

        <div class="section">
            <div class="section-title">4. ルート生成</div>
            <button id="generateBtn" class="btn-success" disabled>ルートを生成</button>
            <div class="info-box" id="routeInfo" style="margin-top: 12px; display: none;">
            </div>
        </div>

        <div class="section">
            <div class="section-title">田んぼ情報</div>
            <div class="info-box" id="areaInfo">
                面積: 未計算
            </div>
        </div>
    </div>

    <div id="map-container">
        <canvas id="canvas"></canvas>
        <div class="status" id="status">マウスで範囲を描画してください</div>
        <div class="coordinates" id="coords">X: 0, Y: 0</div>
    </div>

    <script src="app.js"></script>
</body>
</html>
