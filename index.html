<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”°ã‚“ã¼è€•é‹ãƒ«ãƒ¼ãƒˆå›³</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #f0f0f0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .info {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        canvas {
            display: block;
            width: 100%;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .legend-color {
            width: 40px;
            height: 20px;
            border-radius: 4px;
        }
        .steps {
            background: #fff8e1;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .steps h3 {
            color: #f39c12;
            margin-bottom: 15px;
        }
        .step {
            margin-bottom: 12px;
            padding-left: 25px;
            position: relative;
        }
        .step::before {
            content: 'â–¶';
            position: absolute;
            left: 0;
            color: #27ae60;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸšœ ç”°ã‚“ã¼è€•é‹ãƒ«ãƒ¼ãƒˆå›³</h1>
        
        <div class="info">
            <strong>ç”°ã‚“ã¼æƒ…å ±:</strong> é¢ç© 999.53 mÂ² (ç´„302åª) / å¤–å‘¨ 128.08 m<br>
            <strong>ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼:</strong> ãƒ¤ãƒ³ãƒãƒ¼ AF222 (ä½œæ¥­å¹…110cmã€é‡è¤‡10cm)
        </div>

        <canvas id="routeCanvas" width="1000" height="800"></canvas>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #27ae60;"></div>
                <span>å…¥å£ãƒ»å‡ºå£</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #e74c3c; border: 3px dashed white;"></div>
                <span>å¤–å‘¨1å‘¨ç›®</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #e67e22; border: 3px dashed white;"></div>
                <span>å¤–å‘¨2å‘¨ç›®</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #f39c12; border: 3px dashed white;"></div>
                <span>å¤–å‘¨3å‘¨ç›®</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #3498db; border: 3px dashed white;"></div>
                <span>å†…éƒ¨å¾€å¾©</span>
            </div>
        </div>

        <div class="steps">
            <h3>ğŸ“‹ ä½œæ¥­æ‰‹é †</h3>
            <div class="step"><strong>STEP 1:</strong> å·¦ä¸‹ã®è§’ã‹ã‚‰å…¥å ´ï¼ˆç·‘ã®ãƒãƒ¼ã‚«ãƒ¼ï¼‰</div>
            <div class="step"><strong>STEP 2:</strong> å¢ƒç•Œç·šã«æ²¿ã£ã¦å¤–å‘¨1å‘¨ç›®ï¼ˆèµ¤ç·šï¼‰ã‚’æ™‚è¨ˆå›ã‚Šã«è€•ã™</div>
            <div class="step"><strong>STEP 3:</strong> å†…å´ã«1mãšã‚‰ã—ã¦å¤–å‘¨2å‘¨ç›®ï¼ˆã‚ªãƒ¬ãƒ³ã‚¸ç·šï¼‰ã‚’è€•ã™</div>
            <div class="step"><strong>STEP 4:</strong> ã•ã‚‰ã«å†…å´ã«1mãšã‚‰ã—ã¦å¤–å‘¨3å‘¨ç›®ï¼ˆé»„è‰²ç·šï¼‰ã‚’è€•ã™</div>
            <div class="step"><strong>STEP 5:</strong> æ®‹ã£ãŸå†…éƒ¨ã‚’å¾€å¾©ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆé’ç·šï¼‰ã§è€•ã™</div>
            <div class="step"><strong>STEP 6:</strong> å…¥å£ã¨åŒã˜ä½ç½®ã‹ã‚‰é€€å ´</div>
            <div class="step" style="margin-top: 15px; color: #e74c3c;"><strong>æ¨å®šä½œæ¥­æ™‚é–“:</strong> ç´„40-50åˆ†</div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('routeCanvas');
        const ctx = canvas.getContext('2d');

        // ç”°ã‚“ã¼ã®å½¢çŠ¶ï¼ˆç”»åƒã‹ã‚‰èª­ã¿å–ã£ãŸæ¦‚ç•¥åº§æ¨™ï¼‰
        const fieldPoints = [
            { x: 100, y: 100 },   // å·¦ä¸Š
            { x: 400, y: 80 },    // ä¸Š
            { x: 850, y: 300 },   // å³ä¸Š
            { x: 880, y: 650 },   // å³ä¸‹
            { x: 600, y: 720 },   // ä¸‹
            { x: 120, y: 600 },   // å·¦ä¸‹
        ];

        // å…¥å£ãƒ»å‡ºå£
        const entry = { x: 120, y: 600 };

        // èƒŒæ™¯ã‚’æç”»
        ctx.fillStyle = '#8B7355';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // ç”°ã‚“ã¼ã®å½¢çŠ¶ã‚’å¡—ã‚Šã¤ã¶ã—
        ctx.fillStyle = '#D2B48C';
        ctx.beginPath();
        ctx.moveTo(fieldPoints[0].x, fieldPoints[0].y);
        fieldPoints.forEach(p => ctx.lineTo(p.x, p.y));
        ctx.closePath();
        ctx.fill();

        // ãƒãƒªã‚´ãƒ³ã‚’ã‚ªãƒ•ã‚»ãƒƒãƒˆï¼ˆç°¡æ˜“ç‰ˆï¼‰
        function offsetPolygon(points, offset) {
            const result = [];
            for (let i = 0; i < points.length; i++) {
                const p1 = points[i];
                const p2 = points[(i + 1) % points.length];
                const dx = p2.x - p1.x;
                const dy = p2.y - p1.y;
                const len = Math.hypot(dx, dy);
                const nx = -dy / len;
                const ny = dx / len;
                result.push({
                    x: p1.x + nx * offset,
                    y: p1.y + ny * offset
                });
            }
            return result;
        }

        // å¤–å‘¨ã‚’æç”»
        function drawPerimeter(points, color, lineWidth, label) {
            ctx.strokeStyle = 'white';
            ctx.lineWidth = lineWidth + 4;
            ctx.setLineDash([]);
            ctx.beginPath();
            ctx.moveTo(points[0].x, points[0].y);
            points.forEach(p => ctx.lineTo(p.x, p.y));
            ctx.closePath();
            ctx.stroke();

            ctx.strokeStyle = color;
            ctx.lineWidth = lineWidth;
            ctx.setLineDash([12, 8]);
            ctx.beginPath();
            ctx.moveTo(points[0].x, points[0].y);
            points.forEach(p => ctx.lineTo(p.x, p.y));
            ctx.closePath();
            ctx.stroke();
            ctx.setLineDash([]);
        }

        // å¤–å‘¨1å‘¨ç›®ï¼ˆèµ¤ï¼‰
        drawPerimeter(fieldPoints, '#e74c3c', 5, '1å‘¨ç›®');

        // å¤–å‘¨2å‘¨ç›®ï¼ˆã‚ªãƒ¬ãƒ³ã‚¸ï¼‰
        const perimeter2 = offsetPolygon(fieldPoints, -30);
        drawPerimeter(perimeter2, '#e67e22', 5, '2å‘¨ç›®');

        // å¤–å‘¨3å‘¨ç›®ï¼ˆé»„ï¼‰
        const perimeter3 = offsetPolygon(fieldPoints, -60);
        drawPerimeter(perimeter3, '#f39c12', 5, '3å‘¨ç›®');

        // å†…éƒ¨ã®å¾€å¾©ãƒ‘ã‚¿ãƒ¼ãƒ³
        const innerPolygon = offsetPolygon(fieldPoints, -90);
        
        // ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹ã‚’å–å¾—
        let minY = Infinity, maxY = -Infinity;
        innerPolygon.forEach(p => {
            minY = Math.min(minY, p.y);
            maxY = Math.max(maxY, p.y);
        });

        // å¾€å¾©ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æç”»
        ctx.strokeStyle = 'white';
        ctx.lineWidth = 7;
        ctx.setLineDash([]);
        
        let y = minY + 20;
        let direction = 1;
        let lastEnd = null;

        while (y < maxY - 20) {
            const intersections = [];
            
            for (let i = 0; i < innerPolygon.length; i++) {
                const p1 = innerPolygon[i];
                const p2 = innerPolygon[(i + 1) % innerPolygon.length];
                
                if ((p1.y <= y && p2.y > y) || (p2.y <= y && p1.y > y)) {
                    const t = (y - p1.y) / (p2.y - p1.y);
                    const x = p1.x + t * (p2.x - p1.x);
                    intersections.push(x);
                }
            }
            
            intersections.sort((a, b) => a - b);
            
            if (intersections.length >= 2) {
                const start = { x: intersections[0], y };
                const end = { x: intersections[intersections.length - 1], y };
                
                if (lastEnd) {
                    // å‰ã®è¡Œã¨ã®æ¥ç¶šç·š
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
                    ctx.beginPath();
                    ctx.moveTo(lastEnd.x, lastEnd.y);
                    ctx.lineTo(direction === 1 ? start.x : end.x, y);
                    ctx.stroke();
                }
                
                // å¾€å¾©ç·šï¼ˆç™½ã„ç¸å–ã‚Šï¼‰
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 7;
                ctx.beginPath();
                if (direction === 1) {
                    ctx.moveTo(start.x, y);
                    ctx.lineTo(end.x, y);
                    lastEnd = end;
                } else {
                    ctx.moveTo(end.x, y);
                    ctx.lineTo(start.x, y);
                    lastEnd = start;
                }
                ctx.stroke();
                
                // å¾€å¾©ç·šï¼ˆé’ã„æœ¬ä½“ï¼‰
                ctx.strokeStyle = '#3498db';
                ctx.lineWidth = 4;
                ctx.beginPath();
                if (direction === 1) {
                    ctx.moveTo(start.x, y);
                    ctx.lineTo(end.x, y);
                } else {
                    ctx.moveTo(end.x, y);
                    ctx.lineTo(start.x, y);
                }
                ctx.stroke();
            }
            
            y += 35;
            direction *= -1;
        }

        // ç”°ã‚“ã¼ã®å¢ƒç•Œç·š
        ctx.strokeStyle = '#2c3e50';
        ctx.lineWidth = 4;
        ctx.setLineDash([]);
        ctx.beginPath();
        ctx.moveTo(fieldPoints[0].x, fieldPoints[0].y);
        fieldPoints.forEach(p => ctx.lineTo(p.x, p.y));
        ctx.closePath();
        ctx.stroke();

        // å„é ‚ç‚¹ã‚’æç”»
        fieldPoints.forEach(p => {
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(p.x, p.y, 8, 0, Math.PI * 2);
            ctx.stroke();
            
            ctx.fillStyle = '#3498db';
            ctx.beginPath();
            ctx.arc(p.x, p.y, 6, 0, Math.PI * 2);
            ctx.fill();
        });

        // å…¥å£ãƒ»å‡ºå£ãƒãƒ¼ã‚«ãƒ¼
        ctx.strokeStyle = 'white';
        ctx.lineWidth = 4;
        ctx.beginPath();
        ctx.arc(entry.x, entry.y, 20, 0, Math.PI * 2);
        ctx.stroke();

        ctx.fillStyle = '#27ae60';
        ctx.beginPath();
        ctx.arc(entry.x, entry.y, 18, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = 'white';
        ctx.font = 'bold 20px sans-serif';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText('å…¥å£', entry.x, entry.y - 2);
        ctx.font = 'bold 14px sans-serif';
        ctx.fillText('å‡ºå£', entry.x, entry.y + 12);

        // æ–¹å‘ã®çŸ¢å°ã‚’è¿½åŠ 
        function drawArrow(x, y, angle, label) {
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(angle);
            
            // çŸ¢å°ã®å½±
            ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
            ctx.beginPath();
            ctx.moveTo(12, 0);
            ctx.lineTo(-8, -8);
            ctx.lineTo(-8, 8);
            ctx.closePath();
            ctx.fill();
            
            // çŸ¢å°æœ¬ä½“
            ctx.fillStyle = '#27ae60';
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(10, 0);
            ctx.lineTo(-10, -10);
            ctx.lineTo(-10, 10);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            ctx.restore();
            
            // ãƒ©ãƒ™ãƒ«
            ctx.fillStyle = 'white';
            ctx.strokeStyle = '#2c3e50';
            ctx.lineWidth = 3;
            ctx.font = 'bold 14px sans-serif';
            ctx.textAlign = 'center';
            ctx.strokeText(label, x, y - 25);
            ctx.fillText(label, x, y - 25);
        }

        // å¤–å‘¨ã®é€²è¡Œæ–¹å‘çŸ¢å°
        drawArrow(250, 90, 0, 'é–‹å§‹');
        drawArrow(700, 200, Math.PI / 3, 'â†’');
        drawArrow(850, 500, Math.PI / 2, 'â†’');
    </script>
</body>
</html>
